# **โจทย์: ระบบจัดการการซื้อขายในร้านผลไม้ (Fruit Shop Transaction System)**

#### **สถานการณ์:**

คุณกำลังพัฒนาระบบคำนวณราคาสำหรับร้านผลไม้ขนาดเล็ก โปรแกรมนี้จะช่วยให้ร้านสามารถคำนวณยอดรวมสินค้า, หักส่วนลด และจัดการการชำระเงินของลูกค้าได้

#### **ข้อมูลสินค้า (กำหนดในโปรแกรม):**

ร้านผลไม้มีสินค้า 3 ชนิด ดังนี้:
แน่นอนครับ! นี่คือข้อมูลในรูปแบบข้อความธรรมดาตามที่คุณต้องการครับ:

----------

**ข้อมูลสินค้า:**

-   **ID 0:** ส้ม (Orange), ราคาต่อกิโลกรัม: 55 บาท
    
-   **ID 1:** มะม่วง (Mango), ราคาต่อกิโลกรัม: 39 บาท
    
-   **ID 2:** สตรอว์เบอร์รี่ (Strawberry), ราคาต่อกิโลกรัม: 109 บาท
    

----------

#### **เงื่อนไขส่วนลด (จะคำนวณจากยอดรวมสินค้าทั้งหมดในบิล):**

ส่วนลดจะคำนวณจาก **ยอดรวมสินค้าทั้งหมด (Total Product Cost)** ก่อนหักส่วนลด โดยมีเกณฑ์ดังนี้:

-   **ยอดรวมสินค้า** ราคา **500 บาท:** ไม่มีส่วนลด (0%)
    
-   **ยอดรวมสินค้า > 500 บาท และ** ราคา **800 บาท:** ได้รับส่วนลด 10%
    
-   **ยอดรวมสินค้า > 800 บาท และ** ราคา **1000 บาท:** ได้รับส่วนลด 20%
    
-   **ยอดรวมสินค้า > 1000 บาท:** ได้รับส่วนลด 30%
    

# **สิ่งที่โปรแกรมต้องทำ:**

โปรแกรมของคุณจะต้องทำงานตามขั้นตอนดังต่อไปนี้:

1.  **การรับคำสั่งซื้อ (Order Input):**
    
    -   แสดงรายการสินค้า (ID, ชื่อ, ราคา) ให้ลูกค้าเห็น
        
    -   ให้ผู้ใช้ป้อน **ID ของผลไม้** ที่ต้องการซื้อ และ **ปริมาณ (กิโลกรัม)**
        
    -   อนุญาตให้ลูกค้าซื้อสินค้าได้หลายรายการ โดยให้ป้อน `-1` เมื่อต้องการหยุดการสั่งซื้อ
        
    -   **การตรวจสอบข้อมูล (Input Validation):**
        
        -   ID สินค้าต้องอยู่ในช่วงที่กำหนด (0-2)
            
        -   ปริมาณที่สั่งต้องเป็นจำนวนเต็มบวก (มากกว่า 0)
            
        -   ถ้า ID หรือปริมาณไม่ถูกต้อง ให้แจ้งข้อผิดพลาดและให้ป้อนใหม่
            
2.  **การคำนวณยอดรวม (Total Cost Calculation):**
    
    -   คำนวณ **ยอดรวมสินค้าทั้งหมด** (`Total Product Cost`) ก่อนหักส่วนลด จากรายการที่ลูกค้าสั่ง
        
    -   แสดงยอดรวมสินค้าที่คำนวณได้
        
3.  **การคำนวณและหักส่วนลด (Discount Application):**
    
    -   นำ `Total Product Cost` มาพิจารณาตาม **เงื่อนไขส่วนลด** ที่กำหนด
        
    -   คำนวณ **ยอดสุทธิ (Final Cost)** หลังจากหักส่วนลด (หากมี)
        
    -   แสดงยอดส่วนลดที่ได้รับ (ถ้ามี) และ `Final Cost`
        
4.  **การจัดการการชำระเงินและเงินทอน (Payment & Change):**
    
    -   แสดง `Final Cost` ให้ลูกค้าทราบ
        
    -   ให้ผู้ใช้ป้อน **จำนวนเงินที่ลูกค้าชำระ**
        
    -   **ถ้าเงินที่ชำระ < `Final Cost`:** ให้แสดงข้อความว่า "Your payment is incomplete."
        
    -   **ถ้าเงินที่ชำระ >= `Final Cost`:** ให้คำนวณและแสดง **เงินทอน** ที่ลูกค้าจะได้รับ
        

#### **ตัวอย่างการทำงาน (Input และ Output):**

สมมติว่าคุณได้ตั้งค่าข้อมูลสินค้าตามตารางด้านบนแล้ว

```
--- ยินดีต้อนรับสู่ร้านผลไม้! ---
รายการสินค้า:
ID 0: ส้ม (Orange)         - 55 บาท/กก.
ID 1: มะม่วง (Mango)        - 39 บาท/กก.
ID 2: สตรอว์เบอร์รี่ (Strawberry) - 109 บาท/กก.
----------------------------------

--- เริ่มรับออเดอร์ ---
ป้อน ID ผลไม้ที่ต้องการซื้อ (0-2, -1 เพื่อจบ): 0
ป้อนปริมาณ (กก.): 5
  -> สั่ง ส้ม 5 กก. ราคา 275 บาท

ป้อน ID ผลไม้ที่ต้องการซื้อ (0-2, -1 เพื่อจบ): 1
ป้อนปริมาณ (กก.): 3
  -> สั่ง มะม่วง 3 กก. ราคา 117 บาท

ป้อน ID ผลไม้ที่ต้องการซื้อ (0-2, -1 เพื่อจบ): 2
ป้อนปริมาณ (กก.): 2
  -> สั่ง สตรอว์เบอร์รี่ 2 กก. ราคา 218 บาท

ป้อน ID ผลไม้ที่ต้องการซื้อ (0-2, -1 เพื่อจบ): -1
--- จบการสั่งซื้อ ---

ยอดรวมสินค้าทั้งหมด (ก่อนส่วนลด): 610 บาท

--- การคำนวณส่วนลด ---
ยอดรวมเกิน 500 บาท ได้รับส่วนลด 10%
ส่วนลดที่ได้รับ: 61.00 บาท
ยอดสุทธิที่ต้องชำระ: 549.00 บาท

--- การชำระเงิน ---
ยอดสุทธิ: 549.00 บาท
ป้อนจำนวนเงินที่ลูกค้าชำระ: 1000
เงินทอน: 451.00 บาท
----------------------------------
ขอบคุณที่ใช้บริการ!

```

#### **คำแนะนำสำหรับการเขียนโค้ด:**

-   **Constants:** ใช้ `#define` สำหรับจำนวนสินค้า, ความยาวชื่อสินค้า
    
-   **Arrays:** ใช้ 1D array สำหรับชื่อผลไม้และราคา (หรือ 2D char array สำหรับชื่อ)
    
-   **Functions:** แบ่งการทำงานออกเป็นฟังก์ชันย่อยๆ เช่น:
    
    -   `display_products()`: สำหรับแสดงรายการสินค้า
        
    -   `get_order_details()`: สำหรับรับ Input คำสั่งซื้อและคำนวณยอดรวมเบื้องต้น (อาจคืนค่า `total_product_cost`)
        
    -   `calculate_discount_and_final_cost()`: สำหรับคำนวณส่วนลดและยอดสุทธิ (รับ `total_product_cost` เข้าไป และคืนค่า `final_cost`)
        
    -   `process_payment()`: สำหรับจัดการการชำระเงินและเงินทอน
        
-   **Loop Types:** ใช้ `for` loop ในการวนแสดงข้อมูล, `while` loop สำหรับการรับออเดอร์จนกว่าจะหยุด, และ `do-while` loop สำหรับ Input Validation
    
-   **String Handling:** สำหรับการรับชื่อสินค้าหรืออื่นๆ อาจใช้ `fgets` แทน `scanf` เพื่อจัดการช่องว่าง