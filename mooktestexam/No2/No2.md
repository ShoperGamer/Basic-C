## โจทย์ Mock Test: ระบบจัดการสต็อกและวิเคราะห์ยอดขายร้านค้า

คุณได้รับมอบหมายให้พัฒนาระบบง่ายๆ สำหรับร้านค้าขนาดเล็ก เพื่อช่วยจัดการสต็อกสินค้า บันทึกยอดขายประจำวัน และวิเคราะห์ผลกำไร

### **ส่วนที่ 1: การตั้งค่าสต็อกสินค้าเริ่มต้น**

1.  **การกำหนดขนาด:**
    
    -   กำหนดค่าคงที่ `MAX_CATEGORIES` (เช่น 3) และ `MAX_PRODUCTS_PER_CATEGORY` (เช่น 4) โดยใช้ `#define`
        
    -   สร้าง **อาร์เรย์ 2 มิติ** ชื่อ `inventory[MAX_CATEGORIES][MAX_PRODUCTS_PER_CATEGORY]` เพื่อเก็บจำนวนสต็อกสินค้าเริ่มต้น
        
    -   สร้าง **อาร์เรย์ 2 มิติ** ชื่อ `prices[MAX_CATEGORIES][MAX_PRODUCTS_PER_CATEGORY]` เพื่อเก็บราคาสินค้าต่อหน่วย
        
    -   สร้าง **อาร์เรย์ 2 มิติ** ชื่อ `costs[MAX_CATEGORIES][MAX_PRODUCTS_PER_CATEGORY]` เพื่อเก็บต้นทุนสินค้าต่อหน่วย
        
2.  **การป้อนข้อมูลสต็อกและราคา/ต้นทุน:**
    
    -   ใช้ **`for` loop ซ้อน `for` loop** เพื่อวนรับข้อมูลสำหรับแต่ละหมวดหมู่และแต่ละสินค้าในหมวดหมู่นั้น
        
    -   สำหรับสต็อกเริ่มต้น (ใน `inventory`):
        
        -   ใช้ **`do-while` loop** เพื่อตรวจสอบว่าจำนวนสต็อกที่ป้อนเข้ามาถูกต้อง (เช่น 0−100 หน่วย) หากไม่ถูกต้องให้ป้อนใหม่
            
    -   สำหรับราคาและต้นทุน (ใน `prices` และ `costs`):
        
        -   ใช้ **`while` loop** เพื่อตรวจสอบว่าราคา/ต้นทุนที่ป้อนเข้ามาถูกต้อง (เช่น มากกว่า 0) หากไม่ถูกต้องให้ป้อนใหม่
            
3.  **การแสดงผลสต็อกเริ่มต้น:**
    
    -   **แสดงผล** ตารางสต็อกสินค้าเริ่มต้นทั้งหมด (หมวดหมู่, ชื่อสินค้า (สมมติง่ายๆ เช่น "Product A1", "Product A2", "Product B1" โดยใช้ index), สต็อก, ราคา, ต้นทุน)
        

### **ส่วนที่ 2: การประมวลผลยอดขายประจำวัน**

1.  **การบันทึกยอดขาย:**
    
    -   สร้าง **ฟังก์ชันย่อย `processSale`** ที่รับพารามิเตอร์ดังนี้:
        
        -   `int inventory[][MAX_PRODUCTS_PER_CATEGORY]` (อาร์เรย์สต็อก)
            
        -   `float prices[][MAX_PRODUCTS_PER_CATEGORY]` (อาร์เรย์ราคา)
            
        -   `int categoryIndex`, `int productIndex` (ดัชนีหมวดหมู่และสินค้าที่ขาย)
            
        -   `int quantitySold` (จำนวนที่ขาย)
            
        -   `float *transactionRevenue` (Pointer สำหรับส่งค่ารายได้จากการขายครั้งนี้กลับไป)
            
    -   ฟังก์ชันนี้มีหน้าที่:
        
        -   ตรวจสอบว่า `categoryIndex` และ `productIndex` ถูกต้อง
            
        -   ตรวจสอบว่า `quantitySold` เป็นบวกและมีสต็อกเพียงพอ
            
        -   ถ้าข้อมูลถูกต้อง:
            
            -   ลดจำนวนสต็อกใน `inventory`
                
            -   คำนวณรายได้จากการขายครั้งนี้ (`quantitySold * price`)
                
            -   ส่งค่ารายได้นี้กลับไปผ่าน `transactionRevenue` (ใช้ Pointer)
                
        -   ถ้าข้อมูลไม่ถูกต้อง:
            
            -   แสดงข้อความผิดพลาด
                
            -   ส่งค่า 0.0 กลับไปผ่าน `transactionRevenue`
                
2.  **ลูปการขาย:**
    
    -   ใน `main()`:
        
        -   ใช้ **`while` loop** เพื่อให้ผู้ใช้ป้อนข้อมูลการขายไปเรื่อยๆ จนกว่าจะป้อนรหัสหมวดหมู่เป็น −1 เพื่อหยุด
            
        -   ในแต่ละรอบของลูป:
            
            -   รับ `categoryIndex`, `productIndex`, `quantitySold` จากผู้ใช้
                
            -   ใช้ **`while` loop** ในการตรวจสอบความถูกต้องของ `categoryIndex` และ `productIndex` (ต้องอยู่ในช่วงที่ถูกต้อง) หากไม่ถูกต้องให้ป้อนใหม่
                
            -   ใช้ **`while` loop** ในการตรวจสอบความถูกต้องของ `quantitySold` (ต้องเป็นบวกและมีสต็อกเพียงพอ) หากไม่ถูกต้องให้ป้อนใหม่
                
            -   เรียกใช้ฟังก์ชัน `processSale`
                
            -   สะสมยอดรวมรายได้ทั้งหมดของวันในตัวแปร `totalDailyRevenue`
                
3.  **แสดงผลยอดขาย:**
    
    -   เมื่อจบลูปการขาย **แสดงผล** สต็อกสินค้าที่เหลืออยู่ทั้งหมด
        
    -   **แสดงผล** ยอดรวมรายได้ทั้งหมดของวัน (`totalDailyRevenue`)
        

### **ส่วนที่ 3: การวิเคราะห์ผลกำไร**

1.  **คำนวณกำไรต่อหมวดหมู่:**
    
    -   สร้าง **ฟังก์ชันย่อย `calculateCategoryProfit`** ที่รับพารามิเตอร์ดังนี้:
        
        -   `int initialInventory[][MAX_PRODUCTS_PER_CATEGORY]` (สต็อกเริ่มต้น)
            
        -   `int currentInventory[][MAX_PRODUCTS_PER_CATEGORY]` (สต็อกปัจจุบัน)
            
        -   `float prices[][MAX_PRODUCTS_PER_CATEGORY]` (ราคา)
            
        -   `float costs[][MAX_PRODUCTS_PER_CATEGORY]` (ต้นทุน)
            
        -   `int categoryIndex` (ดัชนีหมวดหมู่ที่ต้องการคำนวณ)
            
    -   ฟังก์ชันนี้มีหน้าที่:
        
        -   คำนวณจำนวนสินค้าที่ **ถูกขายออกไป** ในหมวดหมู่นั้น (`initialInventory - currentInventory`)
            
        -   คำนวณกำไรสำหรับแต่ละสินค้าที่ขายได้ในหมวดหมู่นั้น (`(price - cost) * quantitySold`)
            
        -   รวมกำไรของสินค้าทั้งหมดในหมวดหมู่นั้น
            
        -   ส่งค่า **กำไรรวมของหมวดหมู่นั้น** กลับมา (เป็น `float`)
            
    -   ใน `main()`:
        
        -   สร้าง **อาร์เรย์ 1 มิติ** ชื่อ `categoryProfits[MAX_CATEGORIES]` เพื่อเก็บกำไรของแต่ละหมวดหมู่
            
        -   ใช้ **`for` loop** วนผ่านแต่ละหมวดหมู่
            
        -   เรียกใช้ฟังก์ชัน `calculateCategoryProfit` และเก็บผลลัพธ์ลงใน `categoryProfits`
            
2.  **คำนวณกำไรรวมทั้งหมด:**
    
    -   สร้าง **ฟังก์ชันย่อย `calculateOverallProfit`** ที่รับพารามิเตอร์ดังนี้:
        
        -   `float categoryProfits[]` (อาร์เรย์กำไรต่อหมวดหมู่)
            
        -   `int numCategories` (จำนวนหมวดหมู่จริง)
            
    -   ฟังก์ชันนี้มีหน้าที่:
        
        -   รวมกำไรจากทุกหมวดหมู่
            
        -   ส่งค่า **กำไรรวมทั้งหมดของร้านค้า** กลับมา (เป็น `float`)
            
3.  **แสดงผลสรุป:**
    
    -   **แสดงผล** กำไรของแต่ละหมวดหมู่
        
    -   **แสดงผล** กำไรรวมทั้งหมดของร้านค้า
        

**ข้อกำหนดเพิ่มเติม:**

-   ใช้ `main()` เป็นฟังก์ชันหลักในการควบคุม Flow ของโปรแกรม
    
-   ใช้ Global Constants (`#define`) สำหรับกำหนดขนาดสูงสุดของหมวดหมู่และสินค้า
    
-   ควรมี Function Prototype สำหรับทุกฟังก์ชัน
    
-   ใช้ `printf` และ `scanf` ในการรับ/แสดงผลข้อมูล
    
-   ตรวจสอบ Input ให้ถูกต้องตามเงื่อนไขที่กำหนดในแต่ละส่วน